!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("perfect-scrollbar"),require("@delpi/common")):"function"==typeof define&&define.amd?define(["exports","react","perfect-scrollbar","@delpi/common"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ReactScrollbar={},e.React,e.PerfectScrollbar,e.common)}(this,(function(e,t,r,n){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=o(t),i=o(r),c=function(){return c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)},a={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"};function s(e,t,r){var o=(r||n.HtmlUtils.findFirstLevel(e,t)).filter((function(e){return n.HtmlUtils.isVisible(e)}));return o.length>0?o[o.length-1]:{}}var u=":scope>.ps__rail-x",f=":scope>.ps__rail-y",d="".concat(u,", ").concat(u,">.ps__thumb-x, ").concat(f,", ").concat(f,">.ps__thumb-y");function p(e){return n.HtmlUtils.joinClass(["list-dk-scroll-view",e])}var v=function(e){var r,o=e.always,u=void 0!==o&&o,f=t.useState("".concat(e.tagName).toLowerCase()),v=f[0];f[1];var h=t.useState(null),m=h[0],y=h[1],S=t.useState(!1),g=S[0],b=S[1],w=t.useState([]),E=w[0],_=w[1],x=t.useState({}),H=x[0],R=x[1],T=t.useRef(null),j=t.useRef(null),L=n.Hooks.useWindowSize(),N="tbody"===v,k=["ul","dl","ol"].includes(v),q=function(e){var t=e.height,r=e.maxHeight,n=e.width,o=e.maxWidth,l={};return(t||r)&&(l.height=t||"auto",l.maxHeight=r||"auto"),n&&(l.width=n||"auto"),o&&(l.maxWidth=o||"auto"),l}(e),C=(null===(r=e.options)||void 0===r?void 0:r.wheelPropagation)||e.wheelStop,U=function(t){if(e.onMouseEnter&&e.onMouseEnter(t),!g&&m){b(!0);var r=m.element.classList;if(r.contains("ps--active-y")||r.contains("ps--active-x"))return;m.update()}},X=function(){var e,t;m&&(e=H,t=m.element,Object.keys(e).forEach((function(r){return t.removeEventListener(r,e[r],!1)})),R({}),m.destroy(),y(null),O(null))};t.useEffect((function(){var t=function(e,t,r,n,o){if(e){var l=r.current;return{table:l.parentElement,el:l}}if(n.current){if(t.libTable){var i=n.current.querySelector("table"),c=i?i.querySelector("tbody"):null;if(c)return Object.keys(o).forEach((function(e){c.style[e]=o[e]})),{table:i,el:null==i?void 0:i.querySelector("tbody")}}return{el:n.current}}return{el:r.current}}(N,e,T,j,q),r=t.table,n=t.el;r&&(r.classList.add(p(e.className)),r.classList.add("perfect-table"));var o=c({},e.options||{});(r||o.suppressScrollX)&&(o.suppressScrollX=!0),o.wheelPropagation=C;var l=new i.default(n,o);y(l),R(function(e,t){if(t){var r={};return Object.keys(a).forEach((function(n){var o=e[a[n]];o&&(r[n]=function(e){return o(e)},t.addEventListener(n,r[n],!1))})),r}}(e,n));var s=e.refScroll;s&&(s.current=l);var u=Array.from(n.querySelectorAll(d));return _(u),e.triggerScrollClick&&u.forEach((function(e){e.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault()}))})),0!==n.clientHeight&&0!==n.clientWidth||setTimeout((function(){return l.update()}),320),function(){X()}}),[]),t.useEffect((function(){return M()}),[e.effectData,e.isShow,L]);var O=function(t){var r=e.refScroll;r&&!r.current&&(r.current=t)},P=function(e){void 0===e&&(e=!0),m&&(e&&(m.element.scrollTop=0),m.update(),O(m))},M=function(){if(m){var e=(m||{}).element,t=e.children,r=e.scrollTop,o=e.scrollHeight;if(e.clientHeight>=o)return void P();var l=function(e,t){return e.length<=0?[]:Array.from(e).filter((function(e){return!t.includes(e)}))}(t,E);if(l.length<=0)return void P();var i=s(e,":not(.ps__rail-x):not(.ps__rail-y)",l);if(i){var c=3*(e.querySelectorAll("div.ps__rail-y").length-1);N||k?setTimeout((function(){var t,c=s(e,"div.ps__rail-y").clientHeight,a=i.getBoundingClientRect().top-e.getBoundingClientRect().top;if(void 0!==c&&a+i.clientHeight<c){var u=(c<o?o:c)-(void 0===(t=l)&&(t=[]),t.reduce((function(e,t){return e+t.clientHeight||0}),0));if(u>0)return n.HtmlUtils.scrollTo(e,r-u,250),void setTimeout((function(){return P(!1)}),320)}else setTimeout((function(){return P(!1)}))}),c):setTimeout((function(){return P(!1)}),c)}}},Y=function(e){return n.HtmlUtils.joinClass(e,{"scroll-always":u},{"scroll-wheel-stop":C})};if(N)return l.default.createElement("tbody",{ref:T,id:e.id,style:c(c({},e.style),q),className:Y(),onMouseEnter:U},e.children);var D=e.wrapName;return l.default.createElement(v,{ref:T,id:e.id,className:n.HtmlUtils.joinClass(p(e.className),"perfect-list",{"scroll-always":u&&k},{"scroll-wheel-stop":C&&k}),style:c(c({},e.style),e.libTable?{}:q),onMouseEnter:U},k?e.children:l.default.createElement(D,{ref:j,className:Y("scroll-content")},e.children))};v.defaultProps={id:void 0,tagName:"div",effectData:[],always:!1,maxWidth:void 0,maxHeight:void 0,width:void 0,height:void 0,className:void 0,wheelStop:!0,style:{},options:void 0,refScroll:void 0,onMouseEnter:function(){},onScrollY:void 0,onScrollX:void 0,onScrollUp:void 0,onScrollDown:void 0,onScrollLeft:void 0,onScrollRight:void 0,onYReachStart:void 0,onYReachEnd:void 0,onXReachStart:void 0,onXReachEnd:void 0,wrapName:"div",isShow:!1,libTable:!1,triggerScrollClick:!0},e.Scrollbar=v,e.default=v,Object.defineProperty(e,"__esModule",{value:!0})}));
